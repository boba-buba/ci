meta:
  name: "pcapctl ping 8.8.8.8"
  harbours:
      - pcapctl

tasks:
  - boot
  - name: Starting the dumping to file data.pcap
    command: 
      args: "pcapctl start /tmp/data.pcap"
      assert: "Using device: devices/\hw\sys\\00:03.0\\port0"
  - name: Checking the file was created.
    command:
      args: "ls /tmp"
      assert: "data.pcap"
  - name: Ping 8.8.8.8 must go to file
    command: "ping 8.8.8.8"
  - name: Checking file has right size
      command:
        args: "ls -e /tmp"
        assert: "332"
  - name: Stopping the dumping.
      command:
        args: "pcapctl stop"
        assert: "Using device: devices/\hw\sys\\00:03.0\\port0\nDumping was stopped"
  - name: Ping 8.8.8.8 again, file should not change
      command: "ping 8.8.8.8"
  - name: Checking file has the same size.
    command:
      args: "ls -e /tmp"
      assert: "332"